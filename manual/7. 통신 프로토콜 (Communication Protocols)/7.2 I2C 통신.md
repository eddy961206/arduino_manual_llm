## 7.2 I2C 통신

### I2C 통신의 개요

I2C(Inter-Integrated Circuit)는 단거리 직렬 통신 프로토콜로, 디지털 데이터를 두 개의 와이어(SDA, SCL)를 통해 전송합니다. 주로 센서, 액추에이터, 기타 저전력 장치를 마이크로컨트롤러에 연결하는 데 사용됩니다.

### I2C 장치 구조

I2C 네트워크는 마스터-슬레이브 구성으로 작동합니다. 한 번에 한 개의 마스터 장치가 컨트롤하고 여러 개의 슬레이브 장치를 제어할 수 있습니다.

* **마스터:** 데이터를 전송하고 통신 속도와 시간을 제어합니다.
* **슬레이브:** 마스터의 요청에 응답하고 데이터를 받거나 전송합니다.

### SDA와 SCL 핀

I2C 통신에 사용되는 두 개의 와이어는 다음과 같습니다.

* **SDA(Serial Data):** 데이터를 전송하는 양방향 와이어입니다.
* **SCL(Serial Clock):** 데이터 전송을 동기화하는 클록 와이어입니다.

### I2C 통신 방법

1. **주소 지정:** 마스터는 통신하려는 슬레이브 장치의 고유한 7비트 주소를 전송합니다.
2. **쓰기 또는 읽기 요청:** 마스터는 쓰기 또는 읽기 요청을 전송합니다.
3. **데이터 전송:** 마스터와 슬레이브는 데이터를 SDA 와이어를 통해 전송합니다.
4. **종료:** 마스터는 종료 비트를 전송하여 통신을 종료합니다.

### I2C장치 연결

I2C 장치를 아두이노 보드에 연결하려면 다음과 같은 단계를 따릅니다.

1. SDA와 SCL 핀을 아두이노 보드의 해당 핀에 연결합니다.
2. 각 장치의 전원과 접지를 아두이노 보드에 연결합니다.
3. Address Pins(A0-A7)가 있는 경우 필요에 따라 슬레이브 장치의 주소를 설정합니다.

### I2C 라이브러리 사용

아두이노에서는 I2C 통신을 위한 Wire 라이브러리가 제공됩니다. 이 라이브러리를 사용하면 I2C 장치와 쉽게 상호 작용할 수 있습니다.

```c++
#include <Wire.h>

void setup() {
  // Wire 라이브러리 시작
  Wire.begin();
}

void loop() {
  // 슬레이브 장치에서 데이터 읽기
  Wire.requestFrom(슬레이브 주소, 데이터 길이);
  // 데이터가 들어올 때까지 대기
  while (Wire.available()) {
    byte data = Wire.read();
    // 데이터 처리...
  }
}
```

### 예제 프로젝트

I2C를 활용한 간단한 예제 프로젝트는 다음과 같습니다.

* 온도 센서(예: TMP36)와 I2C 통신하여 온도 데이터 수집
* LCD 디스플레이(예: I2C LCD 1602)에 데이터 표시